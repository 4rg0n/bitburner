import { StatsUI, UIModel } from "ui/StatsUI";
import { NumberStack } from "lib/utils";
export async function main(ns) {
    const flags = new Flags(ns, [
        ["help", false, "For displaying some information in the right hand site overview panel"]
    ]);
    ns.disableLog("ALL");
    const moneyBuffer = new NumberStack([], 60);
    const strExpBuffer = new NumberStack([], 60);
    const defExpBuffer = new NumberStack([], 60);
    const dexExpBuffer = new NumberStack([], 60);
    const agiExpBuffer = new NumberStack([], 60);
    const chrExpBuffer = new NumberStack([], 60);
    const repBuffer = new NumberStack([], 60);
    const ui = new StatsUI(12, 28);
    while (true) {
        const pServers = ns.getPurchasedServers();
        const pServerTotalRamMax = pServers.map(server => ns.getServerMaxRam(server)).reduce((a, b) => a + b, 0);
        const pServerTotalRamUsed = pServers.map(server => ns.getServerUsedRam(server)).reduce((a, b) => a + b, 0);
        const hServerRamMax = ns.getServerMaxRam("home");
        const hServerRamUsed = ns.getServerUsedRam("home");
        const moneyCurr = ns.getServerMoneyAvailable("home");
        const strExp = ns.getPlayer().strength_exp;
        const defExp = ns.getPlayer().defense_exp;
        const dexExp = ns.getPlayer().dexterity_exp;
        const agiExp = ns.getPlayer().agility_exp;
        const chrExp = ns.getPlayer().charisma_exp;
        const repGained = ns.getPlayer().workRepGained;
        moneyBuffer.push(moneyCurr);
        repBuffer.push(repGained);
        // todo only show stat exp when it is actualy not 0 
        strExpBuffer.push(strExp);
        defExpBuffer.push(defExp);
        dexExpBuffer.push(dexExp);
        agiExpBuffer.push(agiExp);
        chrExpBuffer.push(chrExp);
        ui.update(new UIModel(repBuffer.avgIncrement(), moneyBuffer.diff(), ns.getScriptIncome()[0], ns.getScriptExpGain(), strExpBuffer.avgIncrement(), defExpBuffer.avgIncrement(), dexExpBuffer.avgIncrement(), agiExpBuffer.avgIncrement(), chrExpBuffer.avgIncrement(), pServerTotalRamUsed, pServerTotalRamMax, hServerRamUsed, hServerRamMax));
        await ns.sleep(1000);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHMuanMiLCJzb3VyY2VSb290IjoiaHR0cDovL2xvY2FsaG9zdDo4MDAwL3NvdXJjZXMvIiwic291cmNlcyI6WyJzdGF0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQztBQUM5QyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRXhDLE1BQU0sQ0FBQyxLQUFLLFVBQVUsSUFBSSxDQUFDLEVBQU87SUFDakMsTUFBTSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFO1FBQzNCLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSx1RUFBdUUsQ0FBQztLQUN4RixDQUFDLENBQUM7SUFDSCxFQUFFLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRXJCLE1BQU0sV0FBVyxHQUFHLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM1QyxNQUFNLFlBQVksR0FBRyxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDN0MsTUFBTSxZQUFZLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sWUFBWSxHQUFHLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM3QyxNQUFNLFlBQVksR0FBRyxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDN0MsTUFBTSxZQUFZLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sU0FBUyxHQUFHLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUMxQyxNQUFNLEVBQUUsR0FBRyxJQUFJLE9BQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFL0IsT0FBTSxJQUFJLEVBQUU7UUFDWCxNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUMxQyxNQUFNLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRyxNQUFNLG1CQUFtQixHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2xILE1BQU0sYUFBYSxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakQsTUFBTSxjQUFjLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25ELE1BQU0sU0FBUyxHQUFHLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyRCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsWUFBWSxDQUFDO1FBQzNDLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLENBQUM7UUFDMUMsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLGFBQWEsQ0FBQztRQUM1QyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsV0FBVyxDQUFDO1FBQzFDLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxZQUFZLENBQUM7UUFDM0MsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLGFBQWEsQ0FBQztRQUUvQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzVCLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDMUIsb0RBQW9EO1FBQ3BELFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUIsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxQixZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzFCLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUIsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUUxQixFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksT0FBTyxDQUNwQixTQUFTLENBQUMsWUFBWSxFQUFFLEVBQ3hCLFdBQVcsQ0FBQyxJQUFJLEVBQUUsRUFDbEIsRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUN2QixFQUFFLENBQUMsZ0JBQWdCLEVBQUUsRUFDckIsWUFBWSxDQUFDLFlBQVksRUFBRSxFQUMzQixZQUFZLENBQUMsWUFBWSxFQUFFLEVBQzNCLFlBQVksQ0FBQyxZQUFZLEVBQUUsRUFDM0IsWUFBWSxDQUFDLFlBQVksRUFBRSxFQUMzQixZQUFZLENBQUMsWUFBWSxFQUFFLEVBQzNCLG1CQUFtQixFQUNuQixrQkFBa0IsRUFDbEIsY0FBYyxFQUNkLGFBQWEsQ0FDYixDQUFDLENBQUM7UUFFSCxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDckI7QUFDRixDQUFDIn0=