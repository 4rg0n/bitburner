import { StatsUI, UIModel } from "ui/StatsUI";
import { NumberStack } from "lib/utils";
import { Flags } from "/lib/Flags";
export async function main(ns) {
    const flags = new Flags(ns, [
        ["help", false, "For displaying some information in the right hand site overview panel"]
    ]);
    ns.disableLog("ALL");
    const moneyBuffer = new NumberStack([], 60);
    const strExpBuffer = new NumberStack([], 60);
    const defExpBuffer = new NumberStack([], 60);
    const dexExpBuffer = new NumberStack([], 60);
    const agiExpBuffer = new NumberStack([], 60);
    const chrExpBuffer = new NumberStack([], 60);
    const repBuffer = new NumberStack([], 60);
    const ui = new StatsUI(12, 28);
    while (true) {
        const pServers = ns.getPurchasedServers();
        const pServerTotalRamMax = pServers.map(server => ns.getServerMaxRam(server)).reduce((a, b) => a + b, 0);
        const pServerTotalRamUsed = pServers.map(server => ns.getServerUsedRam(server)).reduce((a, b) => a + b, 0);
        const hServerRamMax = ns.getServerMaxRam("home");
        const hServerRamUsed = ns.getServerUsedRam("home");
        const moneyCurr = ns.getServerMoneyAvailable("home");
        const strExp = ns.getPlayer().strength_exp;
        const defExp = ns.getPlayer().defense_exp;
        const dexExp = ns.getPlayer().dexterity_exp;
        const agiExp = ns.getPlayer().agility_exp;
        const chrExp = ns.getPlayer().charisma_exp;
        const repGained = ns.getPlayer().workRepGained;
        moneyBuffer.push(moneyCurr);
        repBuffer.push(repGained);
        // todo only show stat exp when it is actualy not 0 
        strExpBuffer.push(strExp);
        defExpBuffer.push(defExp);
        dexExpBuffer.push(dexExp);
        agiExpBuffer.push(agiExp);
        chrExpBuffer.push(chrExp);
        ui.update(new UIModel(repBuffer.avgIncrement(), moneyBuffer.diff(), ns.getScriptIncome()[0], ns.getScriptExpGain(), strExpBuffer.avgIncrement(), defExpBuffer.avgIncrement(), dexExpBuffer.avgIncrement(), agiExpBuffer.avgIncrement(), chrExpBuffer.avgIncrement(), pServerTotalRamUsed, pServerTotalRamMax, hServerRamUsed, hServerRamMax));
        await ns.sleep(1000);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHMuanMiLCJzb3VyY2VSb290IjoiaHR0cDovL2xvY2FsaG9zdDo4MDAwL3NvdXJjZXMvIiwic291cmNlcyI6WyJzdGF0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQztBQUM5QyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ3hDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFbkMsTUFBTSxDQUFDLEtBQUssVUFBVSxJQUFJLENBQUMsRUFBTztJQUNqQyxNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFLEVBQUU7UUFDM0IsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLHVFQUF1RSxDQUFDO0tBQ3hGLENBQUMsQ0FBQztJQUNILEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFckIsTUFBTSxXQUFXLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzVDLE1BQU0sWUFBWSxHQUFHLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM3QyxNQUFNLFlBQVksR0FBRyxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDN0MsTUFBTSxZQUFZLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sWUFBWSxHQUFHLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM3QyxNQUFNLFlBQVksR0FBRyxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDN0MsTUFBTSxTQUFTLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzFDLE1BQU0sRUFBRSxHQUFHLElBQUksT0FBTyxD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